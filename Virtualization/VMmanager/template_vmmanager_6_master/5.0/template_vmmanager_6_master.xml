<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>5.4</version>
    <date>2022-01-14T04:52:27Z</date>
    <groups>
        <group>
            <uuid>da8c196aab9e4705ac1abf71aaf93885</uuid>
            <name>VMmanager 6</name>
        </group>
    </groups>
    <templates>
        <template>
            <uuid>439cf8e0996f4f2d897aaa7887cce054</uuid>
            <template>Template VMmanager 6 Master</template>
            <name>Template VMmanager 6 Master</name>
            <description>Version: 2021-12-29

Template for monitoring VMmanager 6 master server

Please fill macroses for your HOST

- VM6_TOKEN

Get it by POST request 
curl -v  -X POST -H  &quot;accept: application/json&quot; -H  &quot;Content-Type: application/json&quot; -d '{&quot;email&quot;: &quot;__ADMIN__EMAIL__&quot;,
 &quot;password&quot;: &quot;__PASSWORD__&quot;}' &quot;https://__VM_DOMAIN__/auth/v4/public/token&quot;

- VM6_URL
https://__VM_DOMAIN__/vm/v3

It will discover hosts from VM6, if you enable it</description>
            <groups>
                <group>
                    <name>VMmanager 6</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>6aa23842a6e24f159d318e4ec6d62cd7</uuid>
                    <name>Tasks with error</name>
                    <type>HTTP_AGENT</type>
                    <key>tasks.error</key>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>API request from VMmanager 6 for tasks with error</description>
                    <url>{$VM6_URL}/task</url>
                    <query_fields>
                        <query_field>
                            <name>where</name>
                            <value>(status EQ 'failed')</value>
                        </query_field>
                    </query_fields>
                    <headers>
                        <header>
                            <name>Cookie</name>
                            <value>ses6={$VM6_TOKEN}</value>
                        </header>
                        <header>
                            <name>x-xsrf-token</name>
                            <value>{$VM6_TOKEN}</value>
                        </header>
                    </headers>
                    <output_format>JSON</output_format>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>VMmanager 6 Tasks</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>c3c7a6280d0b4b51afa2a388657f04ac</uuid>
                    <name>Error Task count</name>
                    <type>DEPENDENT</type>
                    <key>tasks.error.count</key>
                    <delay>0</delay>
                    <description>Count of tasks with error in VMmanager 6</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.body.size</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>tasks.error</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>VMmanager 6 Tasks</value>
                        </tag>
                    </tags>
                    <triggers>
                        <trigger>
                            <uuid>4384092979e342ed82b29b1df2d485cd</uuid>
                            <expression>(last(/Template VMmanager 6 Master/tasks.error.count,#1)&lt;&gt;last(/Template VMmanager 6 Master/tasks.error.count,#2))=1</expression>
                            <recovery_mode>NONE</recovery_mode>
                            <name>New task error</name>
                            <priority>WARNING</priority>
                            <description>Check VMmanager 6 tasks for new errors</description>
                            <manual_close>YES</manual_close>
                        </trigger>
                    </triggers>
                </item>
                <item>
                    <uuid>56b643fd69c244bca2b8b128a75d74c7</uuid>
                    <name>New Tasks</name>
                    <type>HTTP_AGENT</type>
                    <key>tasks.new</key>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <description>API request for new and waiting tasks from VMmanager 6</description>
                    <url>{$VM6_URL}/task</url>
                    <query_fields>
                        <query_field>
                            <name>where</name>
                            <value>(status EQ 'running' OR status EQ 'created')</value>
                        </query_field>
                    </query_fields>
                    <headers>
                        <header>
                            <name>Cookie</name>
                            <value>ses6={$VM6_TOKEN}</value>
                        </header>
                        <header>
                            <name>x-xsrf-token</name>
                            <value>{$VM6_TOKEN}</value>
                        </header>
                    </headers>
                    <output_format>JSON</output_format>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>VMmanager 6 Tasks</value>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>5d9ddd227056424594decb2d2fb88d8e</uuid>
                    <name>New task count</name>
                    <type>DEPENDENT</type>
                    <key>tasks.new.count</key>
                    <delay>0</delay>
                    <description>Count of running and waiting tasks in VMmanager 6</description>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.body.size</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>tasks.new</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>Application</tag>
                            <value>VMmanager 6 Tasks</value>
                        </tag>
                    </tags>
                </item>
            </items>
            <discovery_rules>
                <discovery_rule>
                    <uuid>1f18d6e44bab495ea356ad6d44b71dc2</uuid>
                    <name>Host discovery</name>
                    <type>HTTP_AGENT</type>
                    <key>host.discovery</key>
                    <delay>1d</delay>
                    <description>Discovery hosts from VMmanager 6</description>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>77a6cc65aa1744b2aa31e8ef84f95f55</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} API status</name>
                            <type>HTTP_AGENT</type>
                            <key>node[{#NODE_ID},api_status]</key>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.list[0]</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <url>{$VM6_URL}/node</url>
                            <query_fields>
                                <query_field>
                                    <name>where</name>
                                    <value>(id EQ {#NODE_ID})</value>
                                </query_field>
                            </query_fields>
                            <headers>
                                <header>
                                    <name>x-xsrf-token</name>
                                    <value>{$VM6_TOKEN}</value>
                                </header>
                                <header>
                                    <name>Cookie</name>
                                    <value>ses6={$VM6_TOKEN}</value>
                                </header>
                            </headers>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>9a003fb362694a11b1d677d6b91dbb8b</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} bird error</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, bird_error]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>VMmanager 6 bird error message</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.bird_error</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>d86ec28ee60b44e6ba1dbeffaba7bac2</uuid>
                                    <expression>last(/Template VMmanager 6 Master/node[{#NODE_ID}, bird_error])&lt;&gt;&quot;&quot;</expression>
                                    <name>Node {#NODE_ID} {#NODE_NAME} bird error</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>82616544598741239d1ca675006f84c0</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} cpu used</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, cpu_used]</key>
                            <delay>0</delay>
                            <description>Allocated cpu cores for VM on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.cpu.used</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>0d538f653aed43dfb6778b203ee94ebf</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} ha error</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, ha_error]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>VMmanager 6 node HA error message</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ha_error</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>1014ed89cfe0417abbaaae936f243d70</uuid>
                                    <expression>last(/Template VMmanager 6 Master/node[{#NODE_ID}, ha_error])&lt;&gt;&quot;no_error&quot;</expression>
                                    <name>Node {#NODE_ID} {#NODE_NAME} HA error</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>29b5e18bdbb6440e891f80d45cdca6f8</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} ha state</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, ha_state]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>VMmanager 6 node HA state</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ha_state</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>9bb12e3ae2f14a9fb482fe884a595342</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} memory allocated</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, mem_allocated]</key>
                            <delay>0</delay>
                            <units>MiB</units>
                            <description>Allocated memory for VM on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ram_mib.allocated</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>6e4a7cfe174a4d479328aeb1ec24c1e4</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} memory total</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, mem_total]</key>
                            <delay>0</delay>
                            <units>MiB</units>
                            <description>Total memory on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.ram_mib.total</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>7921ddd767e544b08dfd61ed6b9d6ce0</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} status</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, status]</key>
                            <delay>0</delay>
                            <trends>0</trends>
                            <value_type>TEXT</value_type>
                            <description>VMmanager 6 node status</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.state</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>852e49a30e244a6da197e52940e9bbf8</uuid>
                                    <expression>last(/Template VMmanager 6 Master/node[{#NODE_ID}, status])&lt;&gt;&quot;active&quot;</expression>
                                    <name>Node {#NODE_ID} {#NODE_NAME} status is not Active</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>ce6bc4193f644348868bad955b068340</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} storage allocated</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, stor_allocated]</key>
                            <delay>0</delay>
                            <units>MiB</units>
                            <description>Storage allocated on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.storage.allocated_mib</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>4967f0793524498ca237a5b98c67b351</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} storage available</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, stor_available]</key>
                            <delay>0</delay>
                            <units>MiB</units>
                            <description>Storage available on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.storage.available_mib</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>ce1503babfee425286121aea5efe42fc</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} storage size</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, stor_size]</key>
                            <delay>0</delay>
                            <units>MiB</units>
                            <description>Storage size on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.storage.size_mib</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>6fdf2cd04673485980835d02d589d465</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} storage used</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, stor_used]</key>
                            <delay>0</delay>
                            <units>MiB</units>
                            <description>Storage used on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.storage.used_mib</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>26c7140eed1c4f089252b8bf1cb67fb7</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} vm active</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, vm_active]</key>
                            <delay>0</delay>
                            <description>Active vm count on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.vm.active</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>0f8133f15c81481bb43437c27ecdf8d1</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} vm crashed</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, vm_crashed]</key>
                            <delay>0</delay>
                            <description>Crashed vm count on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.vm.crashed</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>e00247f9b8fd483e8d5c1a7154829102</uuid>
                                    <expression>last(/Template VMmanager 6 Master/node[{#NODE_ID}, vm_crashed])&gt;0</expression>
                                    <name>Node {#NODE_ID} {#NODE_NAME} crashed VM &gt; 0</name>
                                    <priority>WARNING</priority>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>8956c9973f744deabedd81029056d2f1</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} vm estimated</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, vm_estimated]</key>
                            <delay>0</delay>
                            <description>Estimated vm count on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.vm.estimated</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>3a73c3fbc55e4810882332149cbfefa3</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} vm moving</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, vm_moving]</key>
                            <delay>0</delay>
                            <description>Moving vm count on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.vm.moving</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>c8f49a6949004162814ec1b519cec67e</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} vm stopped</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, vm_stopped]</key>
                            <delay>0</delay>
                            <description>Stopped vm count on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.vm.stopped</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                        <item_prototype>
                            <uuid>07e98cd0f9c447bd9ee7f4281704e9e6</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} vm total</name>
                            <type>DEPENDENT</type>
                            <key>node[{#NODE_ID}, vm_total]</key>
                            <delay>0</delay>
                            <description>Total vm count on VMmanager 6 node</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.vm.total</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>node[{#NODE_ID},api_status]</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Node</value>
                                </tag>
                            </tags>
                        </item_prototype>
                    </item_prototypes>
                    <graph_prototypes>
                        <graph_prototype>
                            <uuid>53d4f946579341249b3e7cdcd07740d7</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} CPU statistics</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, cpu_used]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <uuid>ba6881b6ffb7463a8711590a330a089e</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} memory statistics</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>AC8C14</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, mem_allocated]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>611F27</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, mem_total]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <uuid>f4c65eefc43b4556853726468f5b115f</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} storage statistics</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>1A7C11</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, stor_allocated]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>F63100</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, stor_available]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <color>2774A4</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, stor_size]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>4</sortorder>
                                    <color>A54F10</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, stor_used]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                        <graph_prototype>
                            <uuid>1f0ec5c1ebf44bee9059d594908411a8</uuid>
                            <name>Node {#NODE_ID} {#NODE_NAME} VM statistics</name>
                            <graph_items>
                                <graph_item>
                                    <sortorder>1</sortorder>
                                    <color>FC6EA3</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, vm_active]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>2</sortorder>
                                    <color>6C59DC</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, vm_crashed]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>3</sortorder>
                                    <color>AC8C14</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, vm_estimated]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>4</sortorder>
                                    <color>611F27</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, vm_moving]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>5</sortorder>
                                    <color>F230E0</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, vm_stopped]</key>
                                    </item>
                                </graph_item>
                                <graph_item>
                                    <sortorder>6</sortorder>
                                    <color>5CCD18</color>
                                    <item>
                                        <host>Template VMmanager 6 Master</host>
                                        <key>node[{#NODE_ID}, vm_total]</key>
                                    </item>
                                </graph_item>
                            </graph_items>
                        </graph_prototype>
                    </graph_prototypes>
                    <host_prototypes>
                        <host_prototype>
                            <uuid>76d0c6adc42c4e41a5059333f9f46f5a</uuid>
                            <host>{#CLUSTER_NAME} {#NODE_NAME}</host>
                            <name>{#CLUSTER_NAME} {#NODE_NAME}</name>
                            <status>DISABLED</status>
                            <discover>NO_DISCOVER</discover>
                            <group_links>
                                <group_link>
                                    <group>
                                        <name>VMmanager 6</name>
                                    </group>
                                </group_link>
                            </group_links>
                            <templates>
                                <template>
                                    <name>Template OS Linux by Zabbix agent</name>
                                </template>
                            </templates>
                            <custom_interfaces>YES</custom_interfaces>
                            <interfaces>
                                <interface>
                                    <ip>{#NODE_IP}</ip>
                                </interface>
                            </interfaces>
                        </host_prototype>
                    </host_prototypes>
                    <url>{$VM6_URL}/node</url>
                    <headers>
                        <header>
                            <name>Cookie</name>
                            <value>ses6={$VM6_TOKEN}</value>
                        </header>
                        <header>
                            <name>x-xsrf-token</name>
                            <value>{$VM6_TOKEN}</value>
                        </header>
                    </headers>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#CLUSTER_NAME}</lld_macro>
                            <path>$.cluster.name</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NODE_ID}</lld_macro>
                            <path>$.id</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NODE_IP}</lld_macro>
                            <path>$.ip</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NODE_KERNEL_VER}</lld_macro>
                            <path>$.kernel_version</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NODE_NAME}</lld_macro>
                            <path>$.name</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NODE_OS}</lld_macro>
                            <path>$.os_version</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NODE_QEMU_VER}</lld_macro>
                            <path>$.qemu_version</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NODE_VIRT_TYPE}</lld_macro>
                            <path>$.cluster.virtualization_type</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.list</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
                <discovery_rule>
                    <uuid>8399151cbd1842f5a4ccc6c2c5359092</uuid>
                    <name>Tasks</name>
                    <type>DEPENDENT</type>
                    <key>tasks.new.task</key>
                    <delay>0</delay>
                    <lifetime>1h</lifetime>
                    <description>Discovery tasks from VMmanager 6</description>
                    <item_prototypes>
                        <item_prototype>
                            <uuid>26c5207f5df74db8a0346623dff8b742</uuid>
                            <name>Task {#NAME} {#ID} running time</name>
                            <type>DEPENDENT</type>
                            <key>tasks.task[{#ID}, running]</key>
                            <delay>0</delay>
                            <history>0</history>
                            <trends>0</trends>
                            <units>s</units>
                            <description>VMmanager 6 task running time</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.body.list[?(@.id == {#ID})].running_time</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>[</parameter>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>]</parameter>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>null</parameter>
                                        <parameter>0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>tasks.new</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Tasks</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>1ee2530426a747d4af5e6f4be5bdd27d</uuid>
                                    <expression>last(/Template VMmanager 6 Master/tasks.task[{#ID}, running])&gt;{$TASK_MAX_RUNNING}*60</expression>
                                    <name>Task {#NAME} {#ID} running over {$TASK_MAX_RUNNING} min</name>
                                    <priority>WARNING</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                        <item_prototype>
                            <uuid>b0aaf74650544026adf47bc4da434b9f</uuid>
                            <name>Task {#NAME} {#ID} waiting time</name>
                            <type>DEPENDENT</type>
                            <key>tasks.task[{#ID}, waiting]</key>
                            <delay>0</delay>
                            <history>0</history>
                            <trends>0</trends>
                            <units>s</units>
                            <description>VMmanager 6 task waiting time</description>
                            <preprocessing>
                                <step>
                                    <type>JSONPATH</type>
                                    <parameters>
                                        <parameter>$.body.list[?(@.id == {#ID})].waiting_time</parameter>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>[</parameter>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>]</parameter>
                                        <parameter/>
                                    </parameters>
                                </step>
                                <step>
                                    <type>STR_REPLACE</type>
                                    <parameters>
                                        <parameter>null</parameter>
                                        <parameter>0</parameter>
                                    </parameters>
                                </step>
                            </preprocessing>
                            <master_item>
                                <key>tasks.new</key>
                            </master_item>
                            <tags>
                                <tag>
                                    <tag>Application</tag>
                                    <value>VMmanager 6 Tasks</value>
                                </tag>
                            </tags>
                            <trigger_prototypes>
                                <trigger_prototype>
                                    <uuid>6285fa13410346a695fe651a2fd38666</uuid>
                                    <expression>last(/Template VMmanager 6 Master/tasks.task[{#ID}, waiting])&gt;{$TASK_MAX_WAITING}*60</expression>
                                    <name>Task {#NAME} {#ID} waiting over {$TASK_MAX_WAITING} min</name>
                                    <priority>WARNING</priority>
                                    <manual_close>YES</manual_close>
                                </trigger_prototype>
                            </trigger_prototypes>
                        </item_prototype>
                    </item_prototypes>
                    <master_item>
                        <key>tasks.new</key>
                    </master_item>
                    <lld_macro_paths>
                        <lld_macro_path>
                            <lld_macro>{#ID}</lld_macro>
                            <path>$.id</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#NAME}</lld_macro>
                            <path>$.name</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#RUNNING}</lld_macro>
                            <path>$.running_time</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#STATUS}</lld_macro>
                            <path>$.status</path>
                        </lld_macro_path>
                        <lld_macro_path>
                            <lld_macro>{#WAITING}</lld_macro>
                            <path>$.waiting_time</path>
                        </lld_macro_path>
                    </lld_macro_paths>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.body.list</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                </discovery_rule>
            </discovery_rules>
            <macros>
                <macro>
                    <macro>{$TASK_MAX_RUNNING}</macro>
                    <value>30</value>
                    <description>Max running time for tasks in minutes</description>
                </macro>
                <macro>
                    <macro>{$TASK_MAX_WAITING}</macro>
                    <value>5</value>
                    <description>Max waiting time for tasks in minutes</description>
                </macro>
                <macro>
                    <macro>{$VM6_TOKEN}</macro>
                    <value>token</value>
                    <description>Auth token for admin user in VMmanager 6</description>
                </macro>
                <macro>
                    <macro>{$VM6_URL}</macro>
                    <value>https://__VM_DOMAIN__/vm/v3</value>
                    <description>URL for VMmanager 6</description>
                </macro>
            </macros>
            <dashboards>
                <dashboard>
                    <uuid>04d99fa1dd1b45f084b2a72b0baeb1f0</uuid>
                    <name>VMmanager 6 node graphs</name>
                    <pages>
                        <page>
                            <widgets>
                                <widget>
                                    <type>GRAPH_PROTOTYPE</type>
                                    <width>24</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>columns</name>
                                            <value>3</value>
                                        </field>
                                        <field>
                                            <type>GRAPH_PROTOTYPE</type>
                                            <name>graphid</name>
                                            <value>
                                                <name>Node {#NODE_ID} {#NODE_NAME} VM statistics</name>
                                                <host>Template VMmanager 6 Master</host>
                                            </value>
                                        </field>
                                    </fields>
                                </widget>
                                <widget>
                                    <type>GRAPH_PROTOTYPE</type>
                                    <y>5</y>
                                    <width>24</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>columns</name>
                                            <value>3</value>
                                        </field>
                                        <field>
                                            <type>GRAPH_PROTOTYPE</type>
                                            <name>graphid</name>
                                            <value>
                                                <name>Node {#NODE_ID} {#NODE_NAME} storage statistics</name>
                                                <host>Template VMmanager 6 Master</host>
                                            </value>
                                        </field>
                                    </fields>
                                </widget>
                                <widget>
                                    <type>GRAPH_PROTOTYPE</type>
                                    <y>10</y>
                                    <width>24</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>columns</name>
                                            <value>3</value>
                                        </field>
                                        <field>
                                            <type>GRAPH_PROTOTYPE</type>
                                            <name>graphid</name>
                                            <value>
                                                <name>Node {#NODE_ID} {#NODE_NAME} memory statistics</name>
                                                <host>Template VMmanager 6 Master</host>
                                            </value>
                                        </field>
                                    </fields>
                                </widget>
                                <widget>
                                    <type>GRAPH_PROTOTYPE</type>
                                    <y>15</y>
                                    <width>24</width>
                                    <height>5</height>
                                    <fields>
                                        <field>
                                            <type>INTEGER</type>
                                            <name>columns</name>
                                            <value>3</value>
                                        </field>
                                        <field>
                                            <type>GRAPH_PROTOTYPE</type>
                                            <name>graphid</name>
                                            <value>
                                                <name>Node {#NODE_ID} {#NODE_NAME} CPU statistics</name>
                                                <host>Template VMmanager 6 Master</host>
                                            </value>
                                        </field>
                                    </fields>
                                </widget>
                            </widgets>
                        </page>
                    </pages>
                </dashboard>
            </dashboards>
        </template>
    </templates>
</zabbix_export>
