<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>macOS Content Cache</title>
  <link rel="stylesheet" href="/community-templates/assets/css/styles.css">
  <script src="/community-templates/assets/js/jquery.min.js"></script>
</head>

<body id="body">
  
  
  <a href="https://github.com/zabbix/community-templates/tree/main/Operating_Systems/Mac_OS/template_macos_content_caching">
  <section class="banner-integrations">
	<div class="w container conference-header" id="training_overview" style="padding-top: 60px; min-height: 150px;">
		<div class="banner-content" style="padding-left: 0; padding-bottom: 16px;">
			<h1 class="h1 center">macOS Content Cache</h1>
		</div>
		<!-- <div class="w container">
			<div class="content text">
				<div class="grid grid-space-category center">
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:network </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">category:infrastructure </a>
					</div>
					
					<div class="span">
						<a class="card center category-button" href="" style="color: #25282F">title:Network monitoring </a>
					</div>
					
				</div>
			</div>
		</div> -->
	</div>
</section>
  </a>
  <div class="w container">
    <h2 class="h2">Available versions</h2>
    <br>
    <div class="tabs-section">
      <div id="integrations_tabs" class="tabs">
        <ul>
          
          
          <li>
            <a class="js_tab" id="ver_5_0" href="#body">ver. 5.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_5_4" href="#body">ver. 5.4
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    <br>
    <br>
              
      <div id="content_ver_5_0" class="readme">
        
        



<h1 id="macos-content-cache">macOS Content Cache</h1>

<h2 id="description">Description</h2>

<p>Runtime stats and storage monitoring for macOS High Sierra Caching Service.</p>

<h2 id="overview">Overview</h2>

<p>With the release of macOS 10.13 High Sierra, Apple have made a big change to their App and iCloud content caching services. This function used to be part of their add-on macOS Server package, but with 10.13 they’ve moved the feature into the regular macOS operating system. This means that any Macintosh computer running 10.13 High Sierra can serve as a content cache for a local network.</p>

<p>The old macOS Server version had fancy logs and graphs that allowed you to monitor cahing performance and activity to keep an eye on the efficacy and health of the service. When they moved it all to regular macOS all that stuff disappeared. It’s basically just an on/off checkbox.</p>

<p>Instead, there’s just a command-line tool that outputs the raw data from the service. You can see the stats by running <code class="language-plaintext highlighter-rouge">AssetCacheManagerUtil status</code> from a Terminal window.</p>

<p>This template parses the JSON output of AssetCacheManagerUtil for monitoring in Zabbix.</p>

<p>Requires Zabbix 3.4 and RemoteCommands=1 in the Zabbix Agent.</p>

<h2 id="macros-used">Macros used</h2>

<p>There are no macros links in this template.</p>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<p>There are no discovery rules in this template.</p>

<h2 id="items-collected">Items collected</h2>

<p>|Name|Description|Type|Key and additional info|
|—-|———–|—-|—-|
|Cache Limit|&lt;p&gt;Content Caching configured maximum storage (bytes)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.cachelimit&lt;p&gt;Update: 0&lt;/p&gt;|
|Cache Hit Rate|&lt;p&gt;Ratio of cached data to uncached data sent to clients as a percentage (greater than 100% is possible)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Calculated</code>|contentcache.total.hitrate&lt;p&gt;Update: 60s&lt;/p&gt;|
|Stored: Books|&lt;p&gt;Amount of data currently in cache for “Books”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.books&lt;p&gt;Update: 0&lt;/p&gt;|
|Stored: iCloud|&lt;p&gt;Amount of data currently in cache for “iCloud”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.icloud&lt;p&gt;Update: 0&lt;/p&gt;|
|Active|&lt;p&gt;Content Caching is running (true or false)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.active&lt;p&gt;Update: 0&lt;/p&gt;|
|Stored: Other|&lt;p&gt;Amount of data currently in cache for “Other”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.other&lt;p&gt;Update: 0&lt;/p&gt;|
|iCloud Content Used|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.icloudused&lt;p&gt;Update: 0&lt;/p&gt;|
|Total Stored from Origin|&lt;p&gt;Total data downloaded from Apple’s servers&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.total.storedfromorigin&lt;p&gt;Update: 0&lt;/p&gt;|
|Total Returned to Clients|&lt;p&gt;Total data returned to clients&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.total.returnedtoclients&lt;p&gt;Update: 0&lt;/p&gt;|
|Cache Used|&lt;p&gt;Content Caching storage in use&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.cacheused&lt;p&gt;Update: 0&lt;/p&gt;|
|Bytes Imported|&lt;p&gt;Bytes Imported by Caching Service&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.bytes.imported&lt;p&gt;Update: 0&lt;/p&gt;|
|Content Cache Stats|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code>|system.run[/usr/bin/AssetCacheManagerUtil status –json 2&gt; /dev/null]&lt;p&gt;Update: 60s&lt;/p&gt;|
|Stored: iOS Software|&lt;p&gt;Amount of data currently in cache for “iOS Software”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.ios&lt;p&gt;Update: 0&lt;/p&gt;|
|Server GUID|&lt;p&gt;Apple-generated server GUID&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.guid&lt;p&gt;Update: 0&lt;/p&gt;|
|iCloud Content Free|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.icloudfree&lt;p&gt;Update: 0&lt;/p&gt;|
|Registered|&lt;p&gt;Content Caching is registered with Apple’s servers (true or false)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.registered&lt;p&gt;Update: 0&lt;/p&gt;|
|iCloud Content Limit|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.icloudlimit&lt;p&gt;Update: 0&lt;/p&gt;|
|Stored: macOS Software|&lt;p&gt;Amount of data currently in cache for “macOS Software”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.macos&lt;p&gt;Update: 0&lt;/p&gt;|
|Startup Status|&lt;p&gt;Startup Status (normally “OK”)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.startupstatus&lt;p&gt;Update: 0&lt;/p&gt;|
|Total Cached Data Returned to Clients|&lt;p&gt;Total data returned to clients from cache&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Calculated</code>|contentcache.total.cacheddatareturned&lt;p&gt;Update: 60s&lt;/p&gt;|
|Activated|&lt;p&gt;Content Caching is enabled (true or false)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.activated&lt;p&gt;Update: 0&lt;/p&gt;|
|Bytes Stored from Origin|&lt;p&gt;Download rate (bytes per second) from Apple’s app and iCloud servers&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.bytes.storedfromorigin&lt;p&gt;Update: 0&lt;/p&gt;|
|Bytes Returned to Clients|&lt;p&gt;Download rate (bytes per second) to local macOS and iOS clients&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.bytes.returnedtoclients&lt;p&gt;Update: 0&lt;/p&gt;|</p>
<h2 id="triggers">Triggers</h2>

<p>There are no triggers in this template.</p>


      </div>
              
      <div id="content_ver_5_4" class="readme">
        
        



<h1 id="macos-content-cache">macOS Content Cache</h1>

<h2 id="description">Description</h2>

<p>Runtime stats and storage monitoring for macOS High Sierra Caching Service.</p>

<h2 id="overview">Overview</h2>

<p>With the release of macOS 10.13 High Sierra, Apple have made a big change to their App and iCloud content caching services. This function used to be part of their add-on macOS Server package, but with 10.13 they’ve moved the feature into the regular macOS operating system. This means that any Macintosh computer running 10.13 High Sierra can serve as a content cache for a local network.</p>

<p>The old macOS Server version had fancy logs and graphs that allowed you to monitor cahing performance and activity to keep an eye on the efficacy and health of the service. When they moved it all to regular macOS all that stuff disappeared. It’s basically just an on/off checkbox.</p>

<p>Instead, there’s just a command-line tool that outputs the raw data from the service. You can see the stats by running <code class="language-plaintext highlighter-rouge">AssetCacheManagerUtil status</code> from a Terminal window.</p>

<p>This template parses the JSON output of AssetCacheManagerUtil for monitoring in Zabbix.</p>

<p>Requires Zabbix 3.4 and RemoteCommands=1 in the Zabbix Agent.</p>

<h2 id="macros-used">Macros used</h2>

<p>There are no macros links in this template.</p>

<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<p>There are no discovery rules in this template.</p>

<h2 id="items-collected">Items collected</h2>

<p>|Name|Description|Type|Key and additional info|
|—-|———–|—-|—-|
|Cache Limit|&lt;p&gt;Content Caching configured maximum storage (bytes)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.cachelimit&lt;p&gt;Update: 0&lt;/p&gt;|
|Cache Used|&lt;p&gt;Content Caching storage in use&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.cacheused&lt;p&gt;Update: 0&lt;/p&gt;|
|Stored: iCloud|&lt;p&gt;Amount of data currently in cache for “iCloud”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.icloud&lt;p&gt;Update: 0&lt;/p&gt;|
|Stored: iOS Software|&lt;p&gt;Amount of data currently in cache for “iOS Software”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.ios&lt;p&gt;Update: 0&lt;/p&gt;|
|Content Cache Stats|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent (active)</code>|system.run[/usr/bin/AssetCacheManagerUtil status –json 2&gt; /dev/null]&lt;p&gt;Update: 60s&lt;/p&gt;|
|Stored: Books|&lt;p&gt;Amount of data currently in cache for “Books”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.books&lt;p&gt;Update: 0&lt;/p&gt;|
|Total Stored from Origin|&lt;p&gt;Total data downloaded from Apple’s servers&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.total.storedfromorigin&lt;p&gt;Update: 0&lt;/p&gt;|
|Bytes Returned to Clients|&lt;p&gt;Download rate (bytes per second) to local macOS and iOS clients&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.bytes.returnedtoclients&lt;p&gt;Update: 0&lt;/p&gt;|
|Stored: Other|&lt;p&gt;Amount of data currently in cache for “Other”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.other&lt;p&gt;Update: 0&lt;/p&gt;|
|Total Returned to Clients|&lt;p&gt;Total data returned to clients&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.total.returnedtoclients&lt;p&gt;Update: 0&lt;/p&gt;|
|Active|&lt;p&gt;Content Caching is running (true or false)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.active&lt;p&gt;Update: 0&lt;/p&gt;|
|Startup Status|&lt;p&gt;Startup Status (normally “OK”)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.startupstatus&lt;p&gt;Update: 0&lt;/p&gt;|
|Registered|&lt;p&gt;Content Caching is registered with Apple’s servers (true or false)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.registered&lt;p&gt;Update: 0&lt;/p&gt;|
|Server GUID|&lt;p&gt;Apple-generated server GUID&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.guid&lt;p&gt;Update: 0&lt;/p&gt;|
|Activated|&lt;p&gt;Content Caching is enabled (true or false)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.activated&lt;p&gt;Update: 0&lt;/p&gt;|
|Bytes Stored from Origin|&lt;p&gt;Download rate (bytes per second) from Apple’s app and iCloud servers&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.bytes.storedfromorigin&lt;p&gt;Update: 0&lt;/p&gt;|
|Cache Hit Rate|&lt;p&gt;Ratio of cached data to uncached data sent to clients as a percentage (greater than 100% is possible)&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Calculated</code>|contentcache.total.hitrate&lt;p&gt;Update: 60s&lt;/p&gt;|
|iCloud Content Limit|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.icloudlimit&lt;p&gt;Update: 0&lt;/p&gt;|
|Stored: macOS Software|&lt;p&gt;Amount of data currently in cache for “macOS Software”&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.details.macos&lt;p&gt;Update: 0&lt;/p&gt;|
|Total Cached Data Returned to Clients|&lt;p&gt;Total data returned to clients from cache&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Calculated</code>|contentcache.total.cacheddatareturned&lt;p&gt;Update: 60s&lt;/p&gt;|
|iCloud Content Used|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.icloudused&lt;p&gt;Update: 0&lt;/p&gt;|
|Bytes Imported|&lt;p&gt;Bytes Imported by Caching Service&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.bytes.imported&lt;p&gt;Update: 0&lt;/p&gt;|
|iCloud Content Free|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|contentcache.icloudfree&lt;p&gt;Update: 0&lt;/p&gt;|</p>
<h2 id="triggers">Triggers</h2>

<p>There are no triggers in this template.</p>


      </div>
    
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    this.page.url = "https://zabbix.github.io/community-templates/templates/operating-systems-mac-os-template-macos-content-caching/"; 
    this.page.identifier = "operating-systems-mac-os-template-macos-content-caching"; 
    };
    (function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://zabbix-github-io-community-templates.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  <script>
    (function(){  
      console.log('#content_ver_5_4');
      console.log('#ver_5_4');
      $('.readme').hide();
      $('#content_ver_5_4').fadeIn('slow');
      $('#ver_5_4').addClass('active');

                
        $('#ver_5_0').click(function() {
        $('.readme').hide();
        $('#content_ver_5_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_0').addClass('active');
        })
                
        $('#ver_5_4').click(function() {
        $('.readme').hide();
        $('#content_ver_5_4').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_4').addClass('active');
        })
      
    })();
</script>
</body>
</html>