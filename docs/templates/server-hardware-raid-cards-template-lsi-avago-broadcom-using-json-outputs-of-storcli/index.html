<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>LSI JSON discovery</title>
  <link rel="stylesheet" href="/community-templates/assets/css/styles.css">
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
</head>

<body id="body">
  
  
  <a href="https://github.com/zabbix/community-templates/tree/main/Server_Hardware/RAID_Cards/template_lsi_avago_broadcom_using_json_outputs_of_storcli">
  <section class="banner-integrations">
	<div class="w container conference-header" id="training_overview" style="padding-top: 60px; min-height: 150px;">
		<div class="banner-content" style="padding-left: 0; padding-bottom: 16px;">
			<h1 class="h1 center">LSI JSON discovery</h1>
		</div>
		<!-- <div class="w container">
			<div class="content text">
				<div class="grid grid-space-category center">
					
				</div>
			</div>
		</div> -->
	</div>
</section>
  </a>
  <div class="w container">
    <h2 class="h2">Available versions</h2>
    <br>
    <div class="tabs-section">
      <div id="integrations_tabs" class="tabs">
        <ul>
          
          
          <li>
            <a class="js_tab" id="ver_5_0" href="#body">ver. 5.0
            </a>
          </li>
          
          <li>
            <a class="js_tab" id="ver_5_4" href="#body">ver. 5.4
            </a>
          </li>
          
        </ul>
      </div>
    </div>
    <br>
    <br>
              
      <div id="content_ver_5_0" class="readme">
        
        



<h1 id="lsi-json-discovery">LSI JSON discovery</h1>

<h2 id="overview">Overview</h2>

<h2 id="description">Description</h2>

<p>This template is for discovering and monitoring LSI (Avago, Broadcom) storage controllers by using json outputs of storcli tool. Now it works only with zabbix 4.2</p>

<h2 id="main-features">Main features</h2>

<ul>
  <li>Discovery of controllers, logical discs, physical discs, batteries (bbu an cv) without scripts on servers side (it uses parsing of json and java scripts on zabbix side)</li>
  <li>Monitoring controllers, logical, physical discs, batteries</li>
  <li>Useful with OS, where storcli works</li>
  <li>Comfortable changing of time intervals by macroses.</li>
</ul>

<h2 id="notes">Notes</h2>

<ul>
  <li>Please follow link for the newest version and instruction</li>
</ul>

<p>&lt;</p>

<h2 id="macros-used">Macros used</h2>

<p>|Name|Description|Default|Type|
|—-|———–|——-|—-|
|{$ADAP_THROTTLING_HB_PERIOD}|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">10800</code>|Text macro|
|{$INTERNAL_ITEMS_HISTORY_PEIOD}|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">0</code>|Text macro|
|{$LD_THROTTLING_HB_PERIOD}|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">10800</code>|Text macro|
|{$PD_THROTTLING_HB_PERIOD}|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">10800</code>|Text macro|</p>
<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<p>|Name|Description|Type|Key and additional info|
|—-|———–|—-|—-|
|Controllers discovery|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.ctllld&lt;p&gt;Update: {$ADAP_DISCOVERY_PERIOD}&lt;/p&gt;|
|Physical disks discovery|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.pdlld&lt;p&gt;Update: {$PD_DISCOVERY_PERIOD}&lt;/p&gt;|
|Logical disks discovery|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.ldlld&lt;p&gt;Update: {$LD_DISCOVERY_PERIOD}&lt;/p&gt;|</p>
<h2 id="items-collected">Items collected</h2>

<p>|Name|Description|Type|Key and additional info|
|—-|———–|—-|—-|
|All Ctls info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.ctlsinfo&lt;p&gt;Update: {$ADAP_REQUEST_PERIOD}&lt;/p&gt;|
|All Lds info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.ldsinfo&lt;p&gt;Update: {$LD_REQUEST_PERIOD}&lt;/p&gt;|
|All Pds info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.pdsinfo&lt;p&gt;Update: {$PD_REQUEST_PERIOD}&lt;/p&gt;|
|All bbus info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.bbusinfo&lt;p&gt;Update: {$ADAP_REQUEST_PERIOD}&lt;/p&gt;|
|All cvs info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.cvsinfo&lt;p&gt;Update: {$ADAP_REQUEST_PERIOD}&lt;/p&gt;|
|Controller “{#CTLID}” cache vault data|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvdata.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache bbu data|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbu.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” model|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.model.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” serial number|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.sn.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” state (health)|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.state.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu low charge level|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbulowcharge.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu need to replace|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbureplace.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu serial number|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbusn.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu state|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbustate.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu type|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbutype.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache vault need to replace|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvreplace.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache vault serial number|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvsn.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache vault state|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvstate.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache vault type|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvtype.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” media error count|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.merrcount.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” model|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.model.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” other error count|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.otherrcount.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” predictive failure count|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.predicterrcount.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” SMART flag|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.smartflag.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” serial number|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.sn.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” state|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.state.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Logical disk “{#LDNAME}” (id {#LDID}) level|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ld.level.[”{#LDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Logical disk “{#LDNAME}” (id {#LDID})  state|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ld.state.[”{#LDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|</p>
<h2 id="triggers">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>LSI controller {#CTLID} battery charge level is low</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.ctl.bbulowcharge.[”{#CTLID}”].str(No)}=0 and {LSI JSON discovery:lsi.ctl.bbulowcharge.[”{#CTLID}”].strlen()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery is need to be replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.bbureplace.[”{#CTLID}”].str(No)}=0 and {LSI JSON discovery:lsi.ctl.bbureplace.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery state is {ITEM.LASTVALUE}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.bbustate.[”{#CTLID}”].str(Optimal)}=0 and {LSI JSON discovery:lsi.ctl.bbustate.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery was replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.bbusn.[”{#CTLID}”].diff()}=1 and {LSI JSON discovery:lsi.ctl.bbusn.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery is need to be replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.cvreplace.[”{#CTLID}”].str(No)}=0 and {LSI JSON discovery:lsi.ctl.cvreplace.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery state is {ITEM.LASTVALUE}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.cvstate.[”{#CTLID}”].str(Optimal)}=0 and {LSI JSON discovery:lsi.ctl.cvstate.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery was replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.cvsn.[”{#CTLID}”].diff()}=1 and {LSI JSON discovery:lsi.ctl.cvsn.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} status is {ITEM.LASTVALUE}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.ctl.state.[”{#CTLID}”].str(Opt)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.ctl.state.[”{#CTLID}”].str(Opt)}=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} was replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.ctl.sn.[”{#CTLID}”].diff()}=1 and {LSI JSON discovery:lsi.ctl.sn.[”{#CTLID}”].strlen()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI logical disk “{#LDNAME}” (“{#LDID}”) state is “{ITEM.LASTVALUE}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.ld.state.[”{#LDID}”].str(Optimal)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.ld.state.[”{#LDID}”].str(Optimal)}=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” is “{ITEM.LASTVALUE}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Unconfigured-Bad)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Unconfigured-Good)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Missing)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Offline)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Foreign)}=1) and {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].diff()}=1 and {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].strlen()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Unconfigured-Good)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Online)}=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” media error count is “{ITEM.LASTVALUE}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.merrcount.[”{#PDID}”].last()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.merrcount.[”{#PDID}”].last()}=0&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” predictive failure count is “{ITEM.LASTVALUE}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].last()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].last()}=0&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” predictive failure count is “{ITEM.LASTVALUE}”. Growing up</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].last()}&gt;0 and {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].diff()}=1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].last()}=0&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” was replaced by sn  “{ITEM.LASTVALUE1}”.  Previous sn: “{ITEM.LASTVALUE2}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.sn.[”{#PDID}”].diff()}=1 and {LSI JSON discovery:lsi.pd.sn.[”{#PDID}”].strlen(#2)}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI physical disk: SMART flag was raised up on “{#PDID}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.smartflag.[”{#PDID}”].str(Yes)}=1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.smartflag.[”{#PDID}”].str(No)}=1&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} battery charge level is low (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.ctl.bbulowcharge.[”{#CTLID}”].str(No)}=0 and {LSI JSON discovery:lsi.ctl.bbulowcharge.[”{#CTLID}”].strlen()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery is need to be replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.bbureplace.[”{#CTLID}”].str(No)}=0 and {LSI JSON discovery:lsi.ctl.bbureplace.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery state is {ITEM.LASTVALUE} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.bbustate.[”{#CTLID}”].str(Optimal)}=0 and {LSI JSON discovery:lsi.ctl.bbustate.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery was replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.bbusn.[”{#CTLID}”].diff()}=1 and {LSI JSON discovery:lsi.ctl.bbusn.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery is need to be replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.cvreplace.[”{#CTLID}”].str(No)}=0 and {LSI JSON discovery:lsi.ctl.cvreplace.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery state is {ITEM.LASTVALUE} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.cvstate.[”{#CTLID}”].str(Optimal)}=0 and {LSI JSON discovery:lsi.ctl.cvstate.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery was replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.ctl.cvsn.[”{#CTLID}”].diff()}=1 and {LSI JSON discovery:lsi.ctl.cvsn.[”{#CTLID}”].strlen()}&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} status is {ITEM.LASTVALUE} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.ctl.state.[”{#CTLID}”].str(Opt)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.ctl.state.[”{#CTLID}”].str(Opt)}=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} was replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.ctl.sn.[”{#CTLID}”].diff()}=1 and {LSI JSON discovery:lsi.ctl.sn.[”{#CTLID}”].strlen()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” is “{ITEM.LASTVALUE}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ({LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Unconfigured-Bad)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Unconfigured-Good)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Missing)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Offline)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Foreign)}=1) and {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].diff()}=1 and {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].strlen()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Unconfigured-Good)}=1 or {LSI JSON discovery:lsi.pd.state.[”{#PDID}”].str(Online)}=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” media error count is “{ITEM.LASTVALUE}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.merrcount.[”{#PDID}”].last()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.merrcount.[”{#PDID}”].last()}=0&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” predictive failure count is “{ITEM.LASTVALUE}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].last()}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].last()}=0&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” predictive failure count is “{ITEM.LASTVALUE}”. Growing up (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].last()}&gt;0 and {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].diff()}=1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.predicterrcount.[”{#PDID}”].last()}=0&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” was replaced by sn  “{ITEM.LASTVALUE1}”.  Previous sn: “{ITEM.LASTVALUE2}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.sn.[”{#PDID}”].diff()}=1 and {LSI JSON discovery:lsi.pd.sn.[”{#PDID}”].strlen(#2)}&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI physical disk: SMART flag was raised up on “{#PDID}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.pd.smartflag.[”{#PDID}”].str(Yes)}=1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.pd.smartflag.[”{#PDID}”].str(No)}=1&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI logical disk “{#LDNAME}” (“{#LDID}”) state is “{ITEM.LASTVALUE}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: {LSI JSON discovery:lsi.ld.state.[”{#LDID}”].str(Optimal)}=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: {LSI JSON discovery:lsi.ld.state.[”{#LDID}”].str(Optimal)}=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
  </tbody>
</table>


      </div>
              
      <div id="content_ver_5_4" class="readme">
        
        



<h1 id="lsi-json-discovery">LSI JSON discovery</h1>

<h2 id="overview">Overview</h2>

<h2 id="description">Description</h2>

<p>This template is for discovering and monitoring LSI (Avago, Broadcom) storage controllers by using json outputs of storcli tool. Now it works only with zabbix 4.2</p>

<h2 id="main-features">Main features</h2>

<ul>
  <li>Discovery of controllers, logical discs, physical discs, batteries (bbu an cv) without scripts on servers side (it uses parsing of json and java scripts on zabbix side)</li>
  <li>Monitoring controllers, logical, physical discs, batteries</li>
  <li>Useful with OS, where storcli works</li>
  <li>Comfortable changing of time intervals by macroses.</li>
</ul>

<h2 id="notes">Notes</h2>

<ul>
  <li>Please follow link for the newest version and instruction</li>
</ul>

<p>&lt;</p>

<h2 id="macros-used">Macros used</h2>

<p>|Name|Description|Default|Type|
|—-|———–|——-|—-|
|{$ADAP_THROTTLING_HB_PERIOD}|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">10800</code>|Text macro|
|{$INTERNAL_ITEMS_HISTORY_PEIOD}|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">0</code>|Text macro|
|{$LD_THROTTLING_HB_PERIOD}|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">10800</code>|Text macro|
|{$PD_THROTTLING_HB_PERIOD}|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">10800</code>|Text macro|</p>
<h2 id="template-links">Template links</h2>

<p>There are no template links in this template.</p>

<h2 id="discovery-rules">Discovery rules</h2>

<p>|Name|Description|Type|Key and additional info|
|—-|———–|—-|—-|
|Controllers discovery|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.ctllld&lt;p&gt;Update: {$ADAP_DISCOVERY_PERIOD}&lt;/p&gt;|
|Logical disks discovery|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.ldlld&lt;p&gt;Update: {$LD_DISCOVERY_PERIOD}&lt;/p&gt;|
|Physical disks discovery|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.pdlld&lt;p&gt;Update: {$PD_DISCOVERY_PERIOD}&lt;/p&gt;|</p>
<h2 id="items-collected">Items collected</h2>

<p>|Name|Description|Type|Key and additional info|
|—-|———–|—-|—-|
|All bbus info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.bbusinfo&lt;p&gt;Update: {$ADAP_REQUEST_PERIOD}&lt;/p&gt;|
|All Lds info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.ldsinfo&lt;p&gt;Update: {$LD_REQUEST_PERIOD}&lt;/p&gt;|
|All cvs info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.cvsinfo&lt;p&gt;Update: {$ADAP_REQUEST_PERIOD}&lt;/p&gt;|
|All Ctls info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.ctlsinfo&lt;p&gt;Update: {$ADAP_REQUEST_PERIOD}&lt;/p&gt;|
|All Pds info|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Zabbix agent</code>|lsi.pdsinfo&lt;p&gt;Update: {$PD_REQUEST_PERIOD}&lt;/p&gt;|
|Controller “{#CTLID}” cache vault data|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvdata.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache bbu data|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbu.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” model|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.model.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” serial number|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.sn.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” state (health)|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.state.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu low charge level|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbulowcharge.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu need to replace|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbureplace.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu serial number|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbusn.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu state|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbustate.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” bbu type|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.bbutype.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache vault need to replace|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvreplace.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache vault serial number|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvsn.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache vault state|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvstate.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Controller “{#CTLID}” cache vault type|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ctl.cvtype.[”{#CTLID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Logical disk “{#LDNAME}” (id {#LDID}) level|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ld.level.[”{#LDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Logical disk “{#LDNAME}” (id {#LDID})  state|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.ld.state.[”{#LDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” media error count|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.merrcount.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” model|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.model.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” other error count|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.otherrcount.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” predictive failure count|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.predicterrcount.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” SMART flag|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.smartflag.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” serial number|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.sn.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|
|Physical disk “{#PDID}” state|&lt;p&gt;-&lt;/p&gt;|<code class="language-plaintext highlighter-rouge">Dependent item</code>|lsi.pd.state.[”{#PDID}”]&lt;p&gt;Update: 0&lt;/p&gt;&lt;p&gt;LLD&lt;/p&gt;|</p>
<h2 id="triggers">Triggers</h2>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>Expression</th>
      <th>Priority</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>LSI controller {#CTLID} battery charge level is low</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/LSI JSON discovery/lsi.ctl.bbulowcharge.[”{#CTLID}”],,”like”,”No”)=0 and length(last(/LSI JSON discovery/lsi.ctl.bbulowcharge.[”{#CTLID}”]))&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery is need to be replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.ctl.bbureplace.[”{#CTLID}”],,”like”,”No”)=0 and length(last(/LSI JSON discovery/lsi.ctl.bbureplace.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery state is {ITEM.LASTVALUE}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.ctl.bbustate.[”{#CTLID}”],,”like”,”Optimal”)=0 and length(last(/LSI JSON discovery/lsi.ctl.bbustate.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery was replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ((last(/LSI JSON discovery/lsi.ctl.bbusn.[”{#CTLID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.ctl.bbusn.[”{#CTLID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.ctl.bbusn.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery is need to be replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.ctl.cvreplace.[”{#CTLID}”],,”like”,”No”)=0 and length(last(/LSI JSON discovery/lsi.ctl.cvreplace.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery state is {ITEM.LASTVALUE}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.ctl.cvstate.[”{#CTLID}”],,”like”,”Optimal”)=0 and length(last(/LSI JSON discovery/lsi.ctl.cvstate.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery was replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ((last(/LSI JSON discovery/lsi.ctl.cvsn.[”{#CTLID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.ctl.cvsn.[”{#CTLID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.ctl.cvsn.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} status is {ITEM.LASTVALUE}</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/LSI JSON discovery/lsi.ctl.state.[”{#CTLID}”],,”like”,”Opt”)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: find(/LSI JSON discovery/lsi.ctl.state.[”{#CTLID}”],,”like”,”Opt”)=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} was replaced</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (last(/LSI JSON discovery/lsi.ctl.sn.[”{#CTLID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.ctl.sn.[”{#CTLID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.ctl.sn.[”{#CTLID}”]))&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI logical disk “{#LDNAME}” (“{#LDID}”) state is “{ITEM.LASTVALUE}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/LSI JSON discovery/lsi.ld.state.[”{#LDID}”],,”like”,”Optimal”)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: find(/LSI JSON discovery/lsi.ld.state.[”{#LDID}”],,”like”,”Optimal”)=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” is “{ITEM.LASTVALUE}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Unconfigured-Bad”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Unconfigured-Good”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Missing”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Offline”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Foreign”)=1) and (last(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”]))&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Unconfigured-Good”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Online”)=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” media error count is “{ITEM.LASTVALUE}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/LSI JSON discovery/lsi.pd.merrcount.[”{#PDID}”])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/LSI JSON discovery/lsi.pd.merrcount.[”{#PDID}”])=0&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” predictive failure count is “{ITEM.LASTVALUE}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”])=0&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” predictive failure count is “{ITEM.LASTVALUE}”. Growing up</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”])&gt;0 and (last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”],#2))=1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”])=0&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” was replaced by sn  “{ITEM.LASTVALUE1}”.  Previous sn: “{ITEM.LASTVALUE2}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (last(/LSI JSON discovery/lsi.pd.sn.[”{#PDID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.pd.sn.[”{#PDID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.pd.sn.[”{#PDID}”],#2))&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI physical disk: SMART flag was raised up on “{#PDID}”</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/LSI JSON discovery/lsi.pd.smartflag.[”{#PDID}”],,”like”,”Yes”)=1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: find(/LSI JSON discovery/lsi.pd.smartflag.[”{#PDID}”],,”like”,”No”)=1&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} battery charge level is low (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/LSI JSON discovery/lsi.ctl.bbulowcharge.[”{#CTLID}”],,”like”,”No”)=0 and length(last(/LSI JSON discovery/lsi.ctl.bbulowcharge.[”{#CTLID}”]))&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery is need to be replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.ctl.bbureplace.[”{#CTLID}”],,”like”,”No”)=0 and length(last(/LSI JSON discovery/lsi.ctl.bbureplace.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery state is {ITEM.LASTVALUE} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.ctl.bbustate.[”{#CTLID}”],,”like”,”Optimal”)=0 and length(last(/LSI JSON discovery/lsi.ctl.bbustate.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} bbu battery was replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ((last(/LSI JSON discovery/lsi.ctl.bbusn.[”{#CTLID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.ctl.bbusn.[”{#CTLID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.ctl.bbusn.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery is need to be replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.ctl.cvreplace.[”{#CTLID}”],,”like”,”No”)=0 and length(last(/LSI JSON discovery/lsi.ctl.cvreplace.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery state is {ITEM.LASTVALUE} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.ctl.cvstate.[”{#CTLID}”],,”like”,”Optimal”)=0 and length(last(/LSI JSON discovery/lsi.ctl.cvstate.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} cachevault battery was replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: ((last(/LSI JSON discovery/lsi.ctl.cvsn.[”{#CTLID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.ctl.cvsn.[”{#CTLID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.ctl.cvsn.[”{#CTLID}”]))&gt;0)&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} status is {ITEM.LASTVALUE} (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/LSI JSON discovery/lsi.ctl.state.[”{#CTLID}”],,”like”,”Opt”)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: find(/LSI JSON discovery/lsi.ctl.state.[”{#CTLID}”],,”like”,”Opt”)=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI controller {#CTLID} was replaced (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (last(/LSI JSON discovery/lsi.ctl.sn.[”{#CTLID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.ctl.sn.[”{#CTLID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.ctl.sn.[”{#CTLID}”]))&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI logical disk “{#LDNAME}” (“{#LDID}”) state is “{ITEM.LASTVALUE}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/LSI JSON discovery/lsi.ld.state.[”{#LDID}”],,”like”,”Optimal”)=0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: find(/LSI JSON discovery/lsi.ld.state.[”{#LDID}”],,”like”,”Optimal”)=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” is “{ITEM.LASTVALUE}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Unconfigured-Bad”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Unconfigured-Good”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Missing”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Offline”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Foreign”)=1) and (last(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”]))&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Unconfigured-Good”)=1 or find(/LSI JSON discovery/lsi.pd.state.[”{#PDID}”],,”like”,”Online”)=1&lt;/p&gt;</td>
      <td>high</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” media error count is “{ITEM.LASTVALUE}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/LSI JSON discovery/lsi.pd.merrcount.[”{#PDID}”])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/LSI JSON discovery/lsi.pd.merrcount.[”{#PDID}”])=0&lt;/p&gt;</td>
      <td>average</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” predictive failure count is “{ITEM.LASTVALUE}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”])&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”])=0&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” predictive failure count is “{ITEM.LASTVALUE}”. Growing up (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”])&gt;0 and (last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”],#2))=1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: last(/LSI JSON discovery/lsi.pd.predicterrcount.[”{#PDID}”])=0&lt;/p&gt;</td>
      <td>warning</td>
    </tr>
    <tr>
      <td>LSI physical disk “{#PDID}” was replaced by sn  “{ITEM.LASTVALUE1}”.  Previous sn: “{ITEM.LASTVALUE2}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: (last(/LSI JSON discovery/lsi.pd.sn.[”{#PDID}”],#1)&lt;&gt;last(/LSI JSON discovery/lsi.pd.sn.[”{#PDID}”],#2))=1 and length(last(/LSI JSON discovery/lsi.pd.sn.[”{#PDID}”],#2))&gt;0&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: &lt;/p&gt;</td>
      <td>information</td>
    </tr>
    <tr>
      <td>LSI physical disk: SMART flag was raised up on “{#PDID}” (LLD)</td>
      <td>&lt;p&gt;-&lt;/p&gt;</td>
      <td>&lt;p&gt;<strong>Expression</strong>: find(/LSI JSON discovery/lsi.pd.smartflag.[”{#PDID}”],,”like”,”Yes”)=1&lt;/p&gt;&lt;p&gt;<strong>Recovery expression</strong>: find(/LSI JSON discovery/lsi.pd.smartflag.[”{#PDID}”],,”like”,”No”)=1&lt;/p&gt;</td>
      <td>average</td>
    </tr>
  </tbody>
</table>


      </div>
    
    <div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    this.page.url = "https://zabbix.github.io/community-templates/templates/server-hardware-raid-cards-template-lsi-avago-broadcom-using-json-outputs-of-storcli/"; 
    this.page.identifier = "server-hardware-raid-cards-template-lsi-avago-broadcom-using-json-outputs-of-storcli"; 
    };
    (function() { 
    var d = document, s = d.createElement('script');
    s.src = 'https://zabbix-github-io-community-templates.disqus.com/embed.js';
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
  <script>
    (function(){  
      console.log('#content_ver_5_4');
      console.log('#ver_5_4');
      $('.readme').hide();
      $('#content_ver_5_4').fadeIn('slow');
      $('#ver_5_4').addClass('active');

                
        $('#ver_5_0').click(function() {
        $('.readme').hide();
        $('#content_ver_5_0').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_0').addClass('active');
        })
                
        $('#ver_5_4').click(function() {
        $('.readme').hide();
        $('#content_ver_5_4').fadeIn('slow');
        $('.js_tab').removeClass('active')
        $('#ver_5_4').addClass('active');
        })
      
    })();
</script>
</body>
</html>